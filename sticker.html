<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Sticker Collection</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        body {
            font-family: Fraunces;
            text-align: center;
            background-color: #f4f5e5;
            margin: 20px;
        }

        /* collect a sticker */ 
        h1 { 
            color: #974438;
            font-size: 60px;
        }



        #reader {
            width: 100%; /* Adjust to your preferred width */
            max-width: 400px; /* Limit the size */
            height: 300px; /* Adjust height as needed */
            border: 4px solid #974438;; /* Add border around the camera view */
            border-radius: 15px; /* Optional: rounded corners */
            margin: 20px auto;
        }

       /*------------------------Sticker gallery -----------------------*/
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            justify-content: center;
            background: #fff8e1; /* Light pastel background */
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);
        }

        .sticker {
            width: 110px;
            height: 110px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 3px dashed #ff7b72; /* Dashed border for cute sticker effect */
            border-radius: 15px;
            box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease-in-out;
        }

        .sticker:hover {
            transform: scale(1.1);
        }

        .sticker img {
            width: 80px;
            height: 80px;
            object-fit: contain;
        }

        
        /*------------------------Scroll Bar-----------------------*/
        ::-webkit-scrollbar {
            width: 20px;
        }
            
        ::-webkit-scrollbar-track {
            box-shadow: inset 0 0 5px grey;
            border-radius: 10px;
        }
            
        ::-webkit-scrollbar-thumb {
            background-color: #ca7c3a;
            border-radius: 10px;
        }
            
        ::-webkit-scrollbar-thumb:hover {
            background-color: #974438;
        }
        /*========================Nav Bar=========================*/
        .nav-bar {
            display: flex;
            flex-flow: row wrap;
            width: 100%;
            height: 90px;
            background-color: #ca7c3a;
            box-shadow: 3px 3px 10px lightslategray;
            align-items: center;
            justify-content: center;
            position: sticky;
            top: 0;
            z-index: 1;
        }
            
        .logo {
            flex: 1;
            font-size: 40px;
            padding: 20px;
            margin-left: 50px;
            font-family: 'HeaderFont', Fraunces;
        }
            
        ul.menu {
            flex: 1;
            display: flex;
            flex-flow: row wrap;
        }
            
        .menu li {
            flex: 1;
            list-style-type: none;
            font-size: 16px;
            font-family: Fraunces;
            text-align: center;
        }
            
        .menu li a {
            text-decoration: none;
            color: #000;
            text-transform: uppercase;
        }
            
        .menu li a:hover {
            color: #4a574e;
            text-decoration: underline;
        }



    </style>
</head>
<body>
    <section class="nav-bar">
        <div class="logo">Your Sticker Collection!</div>
        <ul class="menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="#">Stickers</a></li>
        </ul>
        </div>
    </section>
    <h1>Collect a Sticker!</h1>
    <p>Scan the QR code on your keychain to unlock a special sticker!</p> 
    <div id="reader"></div>

    <h2>Your Sticker Collection</h2>
    <div class="gallery" id="stickerGallery"></div>


    <script>
        // Mapping QR codes to sticker images - can make our own stickers ??
        const stickerImages = {
            "sticker_1": "https://example.com/sticker1.png",
            "sticker_2": "https://example.com/sticker2.png",
            "sticker_3": "https://example.com/sticker3.png"
        }
        function launchConfetti() {
            const confettiSettings = { particleCount: 100, spread: 70, origin: { y: 0.6 } };
            confetti(confettiSettings);
        }

        function collectSticker(stickerId) {
            let stickers = JSON.parse(localStorage.getItem("stickers")) || [];

            if  (!stickers.includes(stickerId) && stickerImages[stickerId]) {
                stickers.push(stickerId);
                localStorage.setItem("stickers", JSON.stringify(stickers));

                alert("ðŸŽ‰ New sticker collected!");
                launchConfetti(); // Trigger confetti effect
            } else if (stickers.includes(stickerId)) {
            alert("You already have this sticker!");
            } else {
                alert("Invalid QR Code.");
            }
            displayStickers();
            }

        function displayStickers() {
            let stickers = JSON.parse(localStorage.getItem("stickers")) || [];
            let stickerContainer = document.getElementById("stickerGallery");
            stickerContainer.innerHTML = stickers.map(sticker => 
                `<div class="sticker"><img src="${stickerImages[sticker]}" alt="Sticker"></div>`
            ).join("");
        }

        function onScanSuccess(decodedText) {
            collectSticker(decodedText);
        }

        function onScanError(errorMessage) {
            // Ignore errors (they happen when no QR code is detected)
        }

        let html5QrcodeScanner = new Html5Qrcode("reader");
        html5QrcodeScanner.start({ facingMode: "environment" }, {
            fps: 10,
            qrbox: 250
        }, onScanSuccess, onScanError);

        displayStickers(); // Show stickers on page load
    </script>
</body>
</html>
